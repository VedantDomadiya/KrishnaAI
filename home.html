<!doctype html>
<html lang="en-US">

<head>
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <link href="npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet"
            integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
      <link rel="stylesheet" href="npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
      <!--[if IE]><link rel="icon" href="favicon.ico"><![endif]-->
      <title>Welcome to My Gita GPT - The way of living</title>
      <meta name="description"
            content="Ancient Hindu scripture discussing life's purpose, duty, and spirituality; Lord Krishna advises Arjuna in the battlefield of Kurukshetra.">
      <meta name="keywords" content="My Gita GPT, about hindi, sanatan, religion, mahabharat, Arjuna, Kurukshetra">
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-7FR0NDQKQ5"></script>
      <script>window.dataLayer = window.dataLayer || [];
            function gtag() { dataLayer.push(arguments); }
            gtag('js', new Date());

            gtag('config', 'G-7FR0NDQKQ5');</script>
      <script defer="defer" src="js/chunk-vendors.729a4e50.js"></script>
      <script defer="defer" src="js/app.65fa5f47.js"></script>
      <link href="css/chunk-vendors.b8ed9a43.css" rel="stylesheet">
      <link href="css/app.a22df412.css" rel="stylesheet">
      <link rel="icon" type="image/svg+xml" href="img/icons/safari-pinned-tab.svg">
      <link rel="icon" type="image/png" sizes="32x32" href="img/icons/favicon-32x32.png">
      <link rel="icon" type="image/png" sizes="16x16" href="img/icons/favicon-16x16.png">
      <link rel="manifest" href="manifest.json">
      <meta name="theme-color" content="#eebe3a">
      <meta name="apple-mobile-web-app-capable" content="yes">
      <meta name="apple-mobile-web-app-status-bar-style" content="black">
      <meta name="apple-mobile-web-app-title" content="My Gita GPT">
      <link rel="apple-touch-icon" href="img/icons/apple-touch-icon-152x152.png">
      <link rel="mask-icon" href="img/icons/safari-pinned-tab.svg" color="#eebe3a">
      <meta name="msapplication-TileImage" content="img/icons/msapplication-icon-144x144.png">
      <meta name="msapplication-TileColor" content="#a96d06">

      <style>
            #chat-container {
                  width: 90%;
                  max-width: 600px;
                  margin-left: 350px;
                  margin-top: 80px;
                  background-color: white;
                  border-radius: 10px;
                  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
                  overflow: hidden;
                  display: flex;
                  flex-direction: column;
            }

            /* Chatbox */
            #chatbox {
                  padding: 15px;
                  height: 450px;
                  overflow-y: auto;
                  display: flex;
                  flex-direction: column;
                  background-color: #fff;
            }

            /* Messages */
            .message {
                  max-width: 80%;
                  padding: 10px 15px;
                  margin: 5px;
                  border-radius: 15px;
                  line-height: 1.4;
                  word-wrap: break-word;
            }

            .user {
                  border-radius: 20px;
                  margin-top: 10px;
                  padding: 15px;
                  align-self: flex-end;
                  background-color: #ecd7b7;
                  color: rgba(0, 0, 0, 0.651);
                  text-align: right;
                  transition: 0.5s;
            }

            .bot {
                  border-radius: 20px;
                  padding: 15px;
                  margin-top: 10px;
                  align-self: flex-start;
                  background-color: #fcd78d;
                  color: #000000;
                  text-align: left;
                  transition: 0.5s;
            }

            /* Chat Input Section */
            .chat-input-container {
                  display: flex;
                  padding: 10px;
                  border-top: 1px solid #ddd;
                  background-color: #f9f9f9;
            }

            input {
                  flex: 1;
                  padding: 12px;
                  border-radius: 20px;
                  border: 1px solid #ccc;
                  outline: none;
                  font-size: 16px;
            }

            button {
                  background-color: #17f69d;
                  color: white;
                  border: none;
                  padding: 12px 20px;
                  border-radius: 20px;
                  cursor: pointer;
                  font-size: 16px;
                  margin-left: 10px;
                  transition: 0.3s;
            }

            button:hover {
                  background-color: #005bbf;
            }

            .bot:hover {
                  box-shadow: 0 0 3px black;
                  margin-top: -10px;
            }

            .user:hover {
                  box-shadow: 0 0 3px rgb(232, 227, 227);
                  margin-top: -10px;
            }

            /* Scrollbar */
            #chatbox::-webkit-scrollbar {
                  width: 8px;
            }

            #chatbox::-webkit-scrollbar-thumb {
                  background-color: #bbbbbb94;
                  border-radius: 50px;
            }

            /* Style for headings */
            h4 {
                  font-size: 16px;
                  font-weight: bold;
                  margin: 10px 0;
                  color: #333;
            }

            /* Style for paragraphs */
            p {
                  font-size: 14px;
                  line-height: 1.6;
                  margin: 5px 0;
            }

            /* Optional: Collapsible sections */
            .collapsible {
                  background-color: #f4f4f4;
                  color: #555;
                  cursor: pointer;
                  padding: 18px;
                  width: 100%;
                  border: none;
                  text-align: left;
                  outline: none;
                  font-size: 15px;
            }

            .active,
            .collapsible:hover {
                  background-color: #ddd;
            }

            .content {
                  padding: 0 18px;
                  display: none;
                  overflow: hidden;
                  background-color: #f1f1f1;
            }

            .navbar {
                  margin-bottom: 20px;
                  opacity: 50%;
            }
      </style>


</head>

<body>
      


      <!-- Navigation Bar -->
      <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <div class="container-fluid">
                  <a class="navbar-brand" href="#">KrishnaAI</a>
                  <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                        aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                  </button>
                  <div class="collapse navbar-collapse" id="navbarNav">
                        <ul class="navbar-nav ms-auto">
                              <li class="nav-item">
                                    <a class="nav-link active" aria-current="page" href="#">Home</a>
                              </li>
                              <li class="nav-item">
                                    <a class="nav-link" href="#">About</a>
                              </li>
                              <li class="nav-item">
                                    <a class="nav-link" href="#">Contact</a>
                              </li>
                              <li class="nav-item">
                                    <a class="nav-link" href="#">FAQ</a>
                              </li>
                        </ul>
                  </div>
            </div>
      </nav>

      <div id="app"></div>
      

      <div id="chat-container">

            <div id="chatbox"></div>

            <div class="chat-input-container">
                  <input type="text" id="userInput" placeholder="Ask something about Bhagavad Gita..."
                        onkeypress="handleKeyPress(event)">
                  <button onclick="sendMessage()">Send</button>
            </div>
      </div>




</body>

<script>
      let userData = '';
      let botData = '';
      function handleKeyPress(event) {
            if (event.key === "Enter") {
                  sendMessage();
            }
      }

      const a1 = 'sk-proj-DEE8BiF--';
      const a2 = 'bRtoD8ltvfg1064CICqUXhp5zNtrD9oNgjcxPdBuYqivl8tUHb7bfy5cs2HJ_';
      const a3 = 'hawJT3BlbkFJWxORKCCNTANwVRAxAmeWhfaFIuZ2Rwh0hTRhdMAqUCwbCocv5_LNs-uGuTPwgj-t5F5VLrX6QA';
      const API_KEY = a1 + a2 + a3;

      const messages = [
            { role: "system", content: "You are an AI assistant knowledgeable in the Bhagavad Gita. Provide insightful responses using relevant verses and explanations. Make it more detailed. and length should be more than 500 words " }
      ];

      async function sendMessage() {
            const userMessage = document.getElementById("userInput").value.trim();
            userData = userMessage;
            document.getElementById("userInput").value = "";
            if (!userMessage) return;

            // Add user message to history
            messages.push({ role: "user", content: userMessage });

            // Display user message
            displayMessage("You: " + userMessage, "user");

            // Call OpenAI API with full conversation history
            const response = await fetch("https://api.openai.com/v1/chat/completions", {
                  method: "POST",
                  headers: {
                        "Content-Type": "application/json",
                        "Authorization": `Bearer ${API_KEY}`
                  },
                  body: JSON.stringify({
                        model: "ft:gpt-4o-mini-2024-07-18:personal::B204xqSk",
                        messages: messages,
                  })
                  //and there aree some zmbitionus guyasmeet sandf whos There 
            });

            const data = await response.json();
            const botMessage = data.choices[0]?.message?.content || "Sorry, I couldn't understand.";
            botData = botMessage;
            // Add bot response to history
            messages.push({ role: "assistant", content: botMessage });

            function formatGitaResponse(response) {
                  // Split the response into sections based on keywords like "Meaning," "Explanation," and "Guidance"
                  const parts = response.split(/(Meaning:|Explanation:|Guidance:)/);

                  // Initialize an array to hold formatted sections
                  let formattedSections = [];

                  // Iterate through the parts and format them
                  for (let i = 0; i < parts.length; i++) {
                        const part = parts[i].trim();

                        // Check if the part is a header (e.g., "Meaning:", "Explanation:", "Guidance:")
                        if (part === "Meaning:" || part === "Explanation:" || part === "Guidance:") {
                              // Add a heading for the section
                              formattedSections.push(`<h4>${part.replace(":", "")}</h4>`);
                        } else if (part) {
                              // Add the content of the section
                              formattedSections.push(`<p>${part}</p>`);
                        }
                  }

                  // Combine all formatted sections
                  return `
        📖 
        ${formattedSections.join("")}
    `;
            }

            let botMessage1 = formatGitaResponse(botMessage)
            console.log(botMessage1)

            displayMessage("Guru : " + botMessage1, "bot");



            appendToGitHubFile();
      }

      function displayMessage(text, className) {
            const chatbox = document.getElementById("chatbox");
            const messageDiv = document.createElement("div");
            messageDiv.className = className;
            messageDiv.innerHTML = text;
            chatbox.appendChild(messageDiv);
            chatbox.scrollTop = chatbox.scrollHeight;
      }



</script>

<script src="npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
      crossorigin="anonymous"></script>
<script>window.gtranslateSettings = { "default_language": "en", "native_language_names": true, "wrapper_selector": ".gtranslate_wrapper" }</script>
<script src="widgets/latest/popup.js" defer="defer"></script>

</html>